<?xml version="1.0" encoding="utf-8"?>
<!--
Copyright (c) 2014-2023 Object Builder <https://github.com/ottools/ObjectBuilder>

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
-->

<mg:TitleWindow xmlns:fx="http://ns.adobe.com/mxml/2009"
    xmlns:s="library://ns.adobe.com/flex/spark"
    xmlns:mx="library://ns.adobe.com/flex/mx"
    xmlns:mg="library://ns.mignari.com/mg"
    xmlns:nail="library://ns.nail.com/naillib"
    xmlns:otlib="otlib.components.*"
    title="@Resource(key='bulkPropertyEditor', bundle='strings')"
    width="900"
    height="700"
    minWidth="625"
    minHeight="400"
    creationComplete="creationCompleteHandler(event)">

    <fx:Metadata>
        [ResourceBundle("strings")]
    </fx:Metadata>

    <fx:Script>
        <![CDATA[
            import com.mignari.utils.DialogDetail;
            
            import mx.events.FlexEvent;
            import mx.resources.IResourceManager;
            import mx.resources.ResourceManager;
            import mx.core.IVisualElementContainer;
            
            import spark.components.CheckBox;
            import spark.components.DropDownList;
            import spark.components.HGroup;
            import spark.components.VGroup;
            import spark.components.Label;
            import spark.components.NumericStepper;
            import mx.collections.ArrayList;
            
            import otlib.things.ThingCategory;
            import otlib.things.ThingType;
            import flash.utils.Dictionary;
            import ob.settings.ObjectBuilderSettings;
            
            // --------------------------------------------------------------------------
            // PROPERTIES
            // --------------------------------------------------------------------------
            
            private var _detail:uint = DialogDetail.CANCEL;
            private var _selectedIds:Vector.<uint>;
            private var _category:String;
            
            /** Settings reference for loading server attributes. */
            [Bindable]
            public var settings:ObjectBuilderSettings;
            
            /** Whether OTB/items.xml is loaded */
            [Bindable]
            public var otbLoaded:Boolean = false;
            
            /** Reference to the Attributes Editor for collecting bulk attribute changes. */
            private var _attributesEditor:AttributesEditor;
            
            // Lazy loading for AttributesEditor
            [Bindable]
            private var _currentTabIndex:int = 0;
            
            private var _attributesTabInitialized:Boolean = false;
            
            // --------------------------------------
            // Getters / Setters
            // --------------------------------------
            
            public function get detail():uint
            {
                return _detail;
            }
            
            public function get selectedIds():Vector.<uint>
            {
                return _selectedIds;
            }
            public function set selectedIds(value:Vector.<uint>):void
            {
                _selectedIds = value;
                if (selectedCountLabel)
                    selectedCountLabel.text = resourceManager.getString("strings", "itemsSelected", [value ? value.length : 0]);
            }
            
            public function get category():String
            {
                return _category;
            }
            public function set category(value:String):void
            {
                _category = value;
                this.currentState = value;
            }
            
            public function get changedProperties():Array
            {
                var result:Array = [];
            
                // Collect from all BulkPropertyRow components in the current state
                var rows:Vector.<BulkPropertyRow> = getAllPropertyRows();
                for each (var row:BulkPropertyRow in rows)
                {
                    if (row.isChanged)
                    {
                        result.push({
                                    property: row.propertyName,
                                    value: row.value
                                });
                    }
                }
            
                // Add duration changes if applicable
                if (changeDurationCheckbox && changeDurationCheckbox.selected)
                {
                    result.push({
                                property: "_bulkDuration",
                                minDuration: minDurationStepper.value,
                                maxDuration: maxDurationStepper.value,
                                frameGroupTarget: (frameGroupSelector && _category == ThingCategory.OUTFIT) ? frameGroupSelector.selectedItem.value : -1
                            });
                }
            
                // Add animation mode changes if applicable
                if (changeAnimationModeCheckbox && changeAnimationModeCheckbox.selected)
                {
                    result.push({
                                property: "_bulkAnimationMode",
                                animationMode: animationModeDropDown.selectedIndex
                            });
                }
            
                // Add frame strategy changes if applicable
                if (changeFrameStrategyCheckbox && changeFrameStrategyCheckbox.selected)
                {
                    result.push({
                                property: "_bulkFrameStrategy",
                                frameStrategy: frameStrategyDropDown.selectedIndex
                            });
                }
            
                // Add attribute changes if applicable
                // First: add clear flag if checkbox is checked AND we are on the Attributes tab (must come before _bulkAttributes)
                if (clearAttributesCheckbox && clearAttributesCheckbox.selected && _category == ThingCategory.ITEM && _currentTabIndex == 1)
                {
                    var preserve:Boolean = (preserveNamePluralCheckbox && preserveNamePluralCheckbox.selected);
                    result.push({
                                property: "_bulkClearAttributes",
                                value: preserve
                            });
                }
            
                // Then: add attributes to set (merge or replace depending on clear flag)
                if (_attributesEditor)
                {
                    var collectedAttrs:Dictionary = _attributesEditor.collectedAttributes;
                    var hasAttrs:Boolean = false;
                    for (var key:String in collectedAttrs)
                    {
                        hasAttrs = true;
                        break;
                    }
                    if (hasAttrs)
                    {
                        result.push({
                                    property: "_bulkAttributes",
                                    value: collectedAttrs
                                });
                    }
                }
            
                return result;
            }
            
            // --------------------------------------------------------------------------
            // METHODS
            // --------------------------------------------------------------------------
            
            private function getAllPropertyRows():Vector.<BulkPropertyRow>
            {
                var list:Vector.<BulkPropertyRow> = new Vector.<BulkPropertyRow>();
                if (propertiesContainer)
                    collectRows(propertiesContainer, list);
                return list;
            }
            
            private function collectRows(container:IVisualElementContainer, list:Vector.<BulkPropertyRow>):void
            {
                for (var i:int = 0; i < container.numElements; i++)
                {
                    var element:Object = container.getElementAt(i);
                    if (element is BulkPropertyRow)
                    {
                        list.push(element as BulkPropertyRow);
                    }
                    else if (element is IVisualElementContainer)
                    {
                        collectRows(element as IVisualElementContainer, list);
                    }
                }
            }
            
            private function onPropertyChange(event:Event):void
            {
                applyButton.enabled = (changedProperties.length > 0);
            }
            
            // --------------------------------------
            // Event Handlers
            // --------------------------------------
            
            protected function creationCompleteHandler(event:FlexEvent):void
            {
                if (_selectedIds)
                    selectedCountLabel.text = resourceManager.getString("strings", "itemsSelected", [_selectedIds.length]);
            
                if (currentState != _category && _category)
                    currentState = _category;
            }
            
            protected function applyButtonClickHandler(event:MouseEvent):void
            {
                _detail = DialogDetail.OK;
                close();
            }
            
            protected function cancelButtonClickHandler(event:MouseEvent):void
            {
                _detail = DialogDetail.CANCEL;
                close();
            }
            
            protected function onAttributesEditorReady(event:FlexEvent):void
            {
                _attributesEditor = attributesEditorComponent;
                _attributesEditor.addEventListener(Event.CHANGE, onPropertyChange);
            }
            
            protected function onTabChange(event:Event):void
            {
                if (tabNavigator)
                    _currentTabIndex = tabNavigator.selectedIndex;
            
                if (!_attributesTabInitialized && tabNavigator && tabNavigator.selectedIndex == 1)
                {
                    _attributesTabInitialized = true;
                    if (attributesTabContent)
                        attributesTabContent.createDeferredContent();
                }
            }
            
            private function frameGroupLabelFunction(item:Object):String
            {
                return item ? item.label : "";
            }
        ]]>
    </fx:Script>

    <mg:states>
        <s:State name="item"/>
        <s:State name="outfit"/>
        <s:State name="effect"/>
        <s:State name="missile"/>
    </mg:states>

    <mg:layout>
        <s:BasicLayout/>
    </mg:layout>

    <s:Group width="100%" height="100%">
        <s:VGroup width="100%" height="100%" paddingLeft="10" paddingRight="10" paddingTop="10" paddingBottom="10" gap="10">

            <!-- Header -->
            <s:VGroup width="100%" gap="5">
                <s:Label id="selectedCountLabel"
                    text="@Resource(key='itemsSelected', bundle='strings')"
                    fontSize="12" fontWeight="bold"/>
                <s:Label text="@Resource(key='bulkEditDescription', bundle='strings')"
                    fontSize="11" color="0x999999"/>
            </s:VGroup>

            <nail:ShadowLine width="100%"/>

            <!-- Tab Navigator for Properties and Attributes -->
            <nail:TabNavigator id="tabNavigator" width="100%" height="100%" change="onTabChange(event)">
                <!-- Properties Tab -->
                <s:NavigatorContent label="@Resource(key='properties', bundle='strings')" width="100%" height="100%">
                    <s:Scroller width="100%" height="100%">
                        <s:VGroup id="propertiesContainer"
                            width="100%"
                            gap="3"
                            paddingLeft="5" paddingRight="5" paddingTop="3">

                            <!-- Ground Properties (ITEM only) -->
                            <nail:GroupBox label="@Resource(key='groundProperties', bundle='strings')"
                                width="100%"
                                includeIn="item">
                                <nail:layout>
                                    <s:VerticalLayout paddingLeft="5" paddingRight="5" paddingTop="3" paddingBottom="5" gap="0"/>
                                </nail:layout>
                                <s:Group width="100%">
                                    <s:layout>
                                        <s:TileLayout columnWidth="220" rowHeight="20" horizontalGap="10" verticalGap="0" columnAlign="justifyUsingWidth"/>
                                    </s:layout>
                                    <otlib:BulkPropertyRow propertyName="isGround" labelText="@Resource(key='isGround', bundle='strings')" change="onPropertyChange(event)"/>
                                    <otlib:BulkPropertyRow propertyName="isGroundBorder" labelText="@Resource(key='isGroundBorder', bundle='strings')" change="onPropertyChange(event)"/>
                                    <otlib:BulkPropertyRow propertyName="isOnBottom" labelText="@Resource(key='isOnBottom', bundle='strings')" change="onPropertyChange(event)"/>
                                    <otlib:BulkPropertyRow propertyName="isOnTop" labelText="@Resource(key='isOnTop', bundle='strings')" change="onPropertyChange(event)"/>
                                    <otlib:BulkPropertyRow propertyName="isFullGround" labelText="@Resource(key='fullGround', bundle='strings')" change="onPropertyChange(event)"/>
                                </s:Group>
                            </nail:GroupBox>

                            <!-- Other Properties (ITEM only) -->
                            <nail:GroupBox label="@Resource(key='othersProperties', bundle='strings')"
                                width="100%"
                                includeIn="item">
                                <nail:layout>
                                    <s:VerticalLayout paddingLeft="5" paddingRight="5" paddingTop="3" paddingBottom="5" gap="0"/>
                                </nail:layout>
                                <s:Group width="100%">
                                    <s:layout>
                                        <s:TileLayout columnWidth="220" rowHeight="20" horizontalGap="10" verticalGap="0" columnAlign="justifyUsingWidth"/>
                                    </s:layout>
                                    <otlib:BulkPropertyRow propertyName="isContainer" labelText="@Resource(key='container', bundle='strings')" change="onPropertyChange(event)"/>
                                    <otlib:BulkPropertyRow propertyName="stackable" labelText="@Resource(key='stackable', bundle='strings')" change="onPropertyChange(event)"/>
                                    <otlib:BulkPropertyRow propertyName="forceUse" labelText="@Resource(key='forceUse', bundle='strings')" change="onPropertyChange(event)"/>
                                    <otlib:BulkPropertyRow propertyName="multiUse" labelText="@Resource(key='multiUse', bundle='strings')" change="onPropertyChange(event)"/>
                                    <otlib:BulkPropertyRow propertyName="isFluidContainer" labelText="@Resource(key='fluidContainer', bundle='strings')" change="onPropertyChange(event)"/>
                                    <otlib:BulkPropertyRow propertyName="isFluid" labelText="@Resource(key='fluid', bundle='strings')" change="onPropertyChange(event)"/>
                                    <otlib:BulkPropertyRow propertyName="isUnpassable" labelText="@Resource(key='unpassable', bundle='strings')" change="onPropertyChange(event)"/>
                                    <otlib:BulkPropertyRow propertyName="isUnmoveable" labelText="@Resource(key='unmovable', bundle='strings')" change="onPropertyChange(event)"/>
                                    <otlib:BulkPropertyRow propertyName="blockMissile" labelText="@Resource(key='blockMissile', bundle='strings')" change="onPropertyChange(event)"/>
                                    <otlib:BulkPropertyRow propertyName="blockPathfind" labelText="@Resource(key='blockPathfinder', bundle='strings')" change="onPropertyChange(event)"/>
                                    <otlib:BulkPropertyRow propertyName="pickupable" labelText="@Resource(key='pickupable', bundle='strings')" change="onPropertyChange(event)"/>
                                    <otlib:BulkPropertyRow propertyName="hangable" labelText="@Resource(key='hangable', bundle='strings')" change="onPropertyChange(event)"/>
                                    <otlib:BulkPropertyRow propertyName="isVertical" labelText="@Resource(key='verticalWall', bundle='strings')" change="onPropertyChange(event)"/>
                                    <otlib:BulkPropertyRow propertyName="isHorizontal" labelText="@Resource(key='horizontalWall', bundle='strings')" change="onPropertyChange(event)"/>
                                    <otlib:BulkPropertyRow propertyName="rotatable" labelText="@Resource(key='rotatable', bundle='strings')" change="onPropertyChange(event)"/>
                                    <otlib:BulkPropertyRow propertyName="dontHide" labelText="@Resource(key='dontHide', bundle='strings')" change="onPropertyChange(event)"/>
                                    <otlib:BulkPropertyRow propertyName="isTranslucent" labelText="@Resource(key='translucent', bundle='strings')" change="onPropertyChange(event)"/>
                                    <otlib:BulkPropertyRow propertyName="isLyingObject" labelText="@Resource(key='lyingObject', bundle='strings')" change="onPropertyChange(event)"/>
                                    <otlib:BulkPropertyRow propertyName="ignoreLook" labelText="@Resource(key='ignoreLook', bundle='strings')" change="onPropertyChange(event)"/>
                                    <otlib:BulkPropertyRow propertyName="hasCharges" labelText="@Resource(key='hasCharges', bundle='strings')" change="onPropertyChange(event)"/>
                                    <otlib:BulkPropertyRow propertyName="noMoveAnimation" labelText="@Resource(key='noMoveAnimation', bundle='strings')" change="onPropertyChange(event)"/>
                                    <otlib:BulkPropertyRow propertyName="usable" labelText="@Resource(key='usable', bundle='strings')" change="onPropertyChange(event)"/>
                                    <otlib:BulkPropertyRow propertyName="animateAlways" labelText="@Resource(key='animateAlways', bundle='strings')" change="onPropertyChange(event)"/>
                                    <otlib:BulkPropertyRow propertyName="writable" labelText="@Resource(key='writable', bundle='strings')" change="onPropertyChange(event)"/>
                                    <otlib:BulkPropertyRow propertyName="writableOnce" labelText="@Resource(key='writableOnce', bundle='strings')" change="onPropertyChange(event)"/>
                                    <otlib:BulkPropertyRow propertyName="floorChange" labelText="@Resource(key='floorChange', bundle='strings')" change="onPropertyChange(event)"/>
                                    <otlib:BulkPropertyRow propertyName="wrappable" labelText="@Resource(key='wrappable', bundle='strings')" change="onPropertyChange(event)"/>
                                    <otlib:BulkPropertyRow propertyName="unwrappable" labelText="@Resource(key='unwrappable', bundle='strings')" change="onPropertyChange(event)"/>
                                </s:Group>
                            </nail:GroupBox>

                            <!-- Outfit Properties -->
                            <nail:GroupBox label="@Resource(key='properties', bundle='strings')"
                                width="100%"
                                includeIn="outfit">
                                <nail:layout>
                                    <s:VerticalLayout paddingLeft="5" paddingRight="5" paddingTop="3" paddingBottom="5" gap="0"/>
                                </nail:layout>
                                <s:Group width="100%">
                                    <s:layout>
                                        <s:TileLayout columnWidth="220" rowHeight="20" horizontalGap="10" verticalGap="0" columnAlign="justifyUsingWidth"/>
                                    </s:layout>
                                    <otlib:BulkPropertyRow propertyName="animateAlways" labelText="@Resource(key='animateAlways', bundle='strings')" change="onPropertyChange(event)"/>
                                </s:Group>
                            </nail:GroupBox>

                            <!-- Effect Properties -->
                            <nail:GroupBox label="@Resource(key='properties', bundle='strings')"
                                width="100%"
                                includeIn="effect">
                                <nail:layout>
                                    <s:VerticalLayout paddingLeft="5" paddingRight="5" paddingTop="3" paddingBottom="5" gap="0"/>
                                </nail:layout>
                                <s:Group width="100%">
                                    <s:layout>
                                        <s:TileLayout columnWidth="220" rowHeight="20" horizontalGap="10" verticalGap="0" columnAlign="justifyUsingWidth"/>
                                    </s:layout>
                                    <otlib:BulkPropertyRow propertyName="topEffect" labelText="@Resource(key='topEffect', bundle='strings')" change="onPropertyChange(event)"/>
                                </s:Group>
                            </nail:GroupBox>

                            <!-- Animation Settings (Item, Outfit, Effect) - NOT Missile -->
                            <nail:GroupBox label="@Resource(key='animationSettings', bundle='strings')"
                                width="100%"
                                excludeFrom="missile">
                                <nail:layout>
                                    <s:VerticalLayout paddingLeft="10" paddingRight="10" paddingTop="8" paddingBottom="10" gap="5"/>
                                </nail:layout>

                                <!-- Animation Mode -->
                                <s:HGroup width="100%" verticalAlign="middle" gap="10">
                                    <s:CheckBox id="changeAnimationModeCheckbox" label="Change"
                                        toolTip="@Resource(key='change', bundle='strings')"
                                        change="onPropertyChange(event)"/>
                                    <s:Label text="{resourceManager.getString('strings', 'animationMode') + ':'}" width="130"/>
                                    <s:DropDownList id="animationModeDropDown" width="150" requireSelection="true" enabled="{changeAnimationModeCheckbox.selected}" selectedIndex="0">
                                        <s:dataProvider>
                                            <s:ArrayList>
                                                <fx:String>Asynchronous</fx:String>
                                                <fx:String>Synchronous</fx:String>
                                            </s:ArrayList>
                                        </s:dataProvider>
                                    </s:DropDownList>
                                </s:HGroup>

                                <!-- Frame Strategy -->
                                <s:HGroup width="100%" verticalAlign="middle" gap="10">
                                    <s:CheckBox id="changeFrameStrategyCheckbox" label="Change"
                                        toolTip="@Resource(key='change', bundle='strings')"
                                        change="onPropertyChange(event)"/>
                                    <s:Label text="{resourceManager.getString('strings', 'frameStrategy') + ':'}" width="130"/>
                                    <s:DropDownList id="frameStrategyDropDown" width="150" requireSelection="true" enabled="{changeFrameStrategyCheckbox.selected}" selectedIndex="0">
                                        <s:dataProvider>
                                            <s:ArrayList>
                                                <fx:String>Loop</fx:String>
                                                <fx:String>Ping-Pong</fx:String>
                                            </s:ArrayList>
                                        </s:dataProvider>
                                    </s:DropDownList>
                                </s:HGroup>
                            </nail:GroupBox>

                            <nail:GroupBox label="@Resource(key='animationDuration', bundle='strings')"
                                width="100%"
                                excludeFrom="missile">
                                <nail:layout>
                                    <s:VerticalLayout paddingLeft="10" paddingRight="10" paddingTop="8" paddingBottom="10" gap="5"/>
                                </nail:layout>

                                <s:HGroup width="100%" verticalAlign="middle" gap="10">
                                    <s:CheckBox id="changeDurationCheckbox" label="Change"
                                        toolTip="@Resource(key='change', bundle='strings')"
                                        change="onPropertyChange(event)"/>
                                    <s:Label text="@Resource(key='setDurationForAllFrames', bundle='strings')"/>

                                    <s:DropDownList id="frameGroupSelector" width="120" requireSelection="true" enabled="{changeDurationCheckbox.selected}"
                                        includeIn="outfit" labelFunction="frameGroupLabelFunction" selectedIndex="0">
                                        <s:dataProvider>
                                            <s:ArrayList>
                                                <fx:Object label="All Groups" value="-1"/>
                                                <fx:Object label="Idle" value="0"/>
                                                <fx:Object label="Walking" value="1"/>
                                            </s:ArrayList>
                                        </s:dataProvider>
                                    </s:DropDownList>
                                </s:HGroup>

                                <s:HGroup width="100%" verticalAlign="middle" gap="10" paddingLeft="20">
                                    <s:Label text="{resourceManager.getString('strings', 'minimumDuration') + ':'}" width="130"/>
                                    <s:NumericStepper id="minDurationStepper" minimum="0" maximum="10000" stepSize="10" value="100" enabled="{changeDurationCheckbox.selected}"/>
                                    <s:Label text="ms"/>
                                </s:HGroup>

                                <s:HGroup width="100%" verticalAlign="middle" gap="10" paddingLeft="20">
                                    <s:Label text="{resourceManager.getString('strings', 'maximumDuration') + ':'}" width="130"/>
                                    <s:NumericStepper id="maxDurationStepper" minimum="0" maximum="10000" stepSize="10" value="100" enabled="{changeDurationCheckbox.selected}"/>
                                    <s:Label text="ms"/>
                                </s:HGroup>
                            </nail:GroupBox>

                            <nail:GroupBox label="@Resource(key='properties', bundle='strings')"
                                width="100%"
                                includeIn="missile">
                                <nail:layout>
                                    <s:VerticalLayout paddingLeft="10" paddingRight="10" paddingTop="8" paddingBottom="10" gap="5"/>
                                </nail:layout>
                                <s:Label text="@Resource(key='noPropertiesAvailable', bundle='strings')"/>
                            </nail:GroupBox>

                        </s:VGroup>
                    </s:Scroller>
                </s:NavigatorContent>

                <s:NavigatorContent id="attributesTabContent" label="@Resource(key='attributes', bundle='strings')" width="100%" height="100%" creationPolicy="none"
                    includeIn="item" visible="{otbLoaded}" includeInLayout="{otbLoaded}">
                    <s:Scroller width="100%" height="100%">
                        <s:VGroup width="100%" paddingLeft="5" paddingRight="5">
                            <otlib:AttributesEditor id="attributesEditorComponent"
                                width="100%"
                                bulkMode="true"
                                settings="{settings}"
                                creationComplete="onAttributesEditorReady(event)"/>
                        </s:VGroup>
                    </s:Scroller>
                </s:NavigatorContent>
            </nail:TabNavigator>

            <nail:ShadowLine width="100%"/>

            <s:HGroup width="100%" verticalAlign="middle" gap="10">

                <s:CheckBox id="clearAttributesCheckbox"
                    label="{resourceManager.getString('strings', 'clearExistingAttributes')}"
                    selected="true"
                    visible="{_currentTabIndex == 1}"
                    includeInLayout="{_currentTabIndex == 1}"
                    change="onPropertyChange(event)"/>

                <s:CheckBox id="preserveNamePluralCheckbox"
                    label="Preserve Name and Plural"
                    selected="true"
                    enabled="{clearAttributesCheckbox.selected}"
                    visible="{_currentTabIndex == 1 &amp;&amp; clearAttributesCheckbox.selected}"
                    includeInLayout="{_currentTabIndex == 1 &amp;&amp; clearAttributesCheckbox.selected}"
                    change="onPropertyChange(event)"/>

                <s:Spacer width="100%"/>
                <s:Button id="applyButton"
                    label="@Resource(key='applyChanges', bundle='strings')"
                    height="22"
                    enabled="false"
                    click="applyButtonClickHandler(event)"/>
                <s:Button id="cancelButton"
                    label="@Resource(key='cancel', bundle='strings')"
                    height="22"
                    click="cancelButtonClickHandler(event)"/>
            </s:HGroup>
        </s:VGroup>

        <otlib:ResizeHandler right="1" bottom="1"/>
    </s:Group>

</mg:TitleWindow>
